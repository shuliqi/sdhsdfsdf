try{!function(e,t){"use strict";var n={toggleClass:function(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},creatElement:function(e,n){var o=t.createElement(e);for(var i in n)o.setAttribute(i,n[i]);return o},stringSplice:function(e,t,n,o){if(""==e)return"";o=""==o?"=":o,t+=o;var i=e.indexOf(t);if(0>i)return"";i+=t.length;var r=e.indexOf(n,i);return i>r&&(r=e.length),e.substring(i,r)},checkCookie:function(){var e=!1;if(navigator.cookiesEnabled)return!0;document.cookie="testcookie=yes;";var t=document.cookie;return t.indexOf("testcookie=yes")>-1&&(e=!0),document.cookie="",e},getCookie:function(e){return void 0==e||""==e?"":this.stringSplice(document.cookie,e,";","")},setCookie:function(e,t,n,o){var i=new Date;i.setDate(i.getDate()+n);var r=e+"="+t+";expires="+i;null!=o&&(r+=";path=/;domain="+o+";"),document.cookie=r},removeCookie:function(e,t){this.setCookie(e,"",-1,t)},outerHTML:function(e){var t=n.creatElement("div",{});return t.appendChild(e),t.innerHTML},getWinWidth:function(){return e.innerWidth||t.docElement.clientWidth||t.body.clientWidth||0},getWinHeight:function(){return e.innerHeight||t.docElement.clientHeight||t.body.clientHeight||0},isEmptyObj:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},hasData:function(e){return!e||"[object Array]"===Object.prototype.toString.call(e)&&!e.length||"[object Object]"===Object.prototype.toString.call(e)&&this.isEmptyObj(e)?!1:!0},jsonp2:function(){var t=0,o=function(o,i,r,s){var a="jsoncallback";null!=s&&(a=s.cbName);var c="jsonpCallback_"+t++;s&&(c=s.cbfnName),o=o+(o.indexOf("?")+1?"&":"?")+a+"="+c+"&timestamp="+Date.now(),e[c]=function(t){r(t,o,r),e[c]=null,n.trigger("afterJSONP")},$.ajax({url:o,data:i,async:!1,type:"GET",timeout:3e3,dataType:"jsonp",success:function(t){r(t,o,r),e[c]=null,n.trigger("afterJSONP")}})};return o}(),jsonp:function(){var o=0,i=function(i,r,s){var a=3e3,c="jsonpCallback_"+o++,i=i+(i.indexOf("?")+1?"&":"?")+"callback="+c+"&timestamp="+Date.now(),l=this.creatElement("script",{src:i});if(e[c]=function(t){clearTimeout(u),r(t,s,i,r),l.parentNode.removeChild(l),e[c]=null,n.trigger("afterJSONP")},t.getElementsByTagName("head")[0].appendChild(l),a)var u=setTimeout(function(){r({},s),l.parentNode.removeChild(l),e[c]=null,n.trigger("afterJSONP")},a)};return i}(),storage:{fastmode:1,checkfastmode:function(){try{localStorage.setItem("checkfastmode",1),this.fastmode=0}catch(e){}},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))}},exchange:function(e,t){var n=e.parentNode,o=t.parentNode,i=Array.prototype.indexOf.call(n.children,e),r=Array.prototype.indexOf.call(o.children,t);o.insertBefore(e,o.children[r]),n.insertBefore(t,n.children[i])},event:{},on:function(e,t){this.event.hasOwnProperty(e)||(this.event[e]=[]),this.event[e].push(t)},trigger:function(e,t){if(this.event.hasOwnProperty(e))for(var n=0,o=this.event[e].length;o>n;n++)this.event[e][n].apply(this,Array.prototype.slice.call(arguments).slice(1))},getSearchValue:function(e){for(var t=location.search.substr(1),n=t.split("&"),o="",i=0,r=n.length;r>i;i++){var s=n[i].split("=");s[0]==e&&(o=s[1])}return o},readabilityNum:function(e){return"number"==typeof e&&e>0?e>9999999?"999万+":e>9999?parseInt(e/1e4)+"万":e:null}};n.storage.checkfastmode(),e.sinaCnHome||(e.sinaCnHome=Object.create({},{S:{value:n}}))}(window,document)}catch(e){console["error"in console?"error":"log"](e,"utils.js")}try{!function(e,t,n){"use strict";var o=function(e,t){this.el=e,this.element=e[0],$.extend(this,t),$.isArray(this.toggleClass)||(this.toggleClass=[this.toggleClass,null])};o.prototype={states:["on","off","disable"],ispending:!0,init:function(){var e=this;this.el.on("tap",function(t){e.ispending&&e.locking||$.when(e.beforetoggle&&e.beforetoggle()).done(function(t){if(0!=t){var n=e.dotoggle();n!=e.states[2]&&(e.locking=!0,$.when(e.toggle(e.el,n)).done(function(){e.locking=!1}))}})})},dotoggle:function(){var e=this.toggleClass[0],t=this.toggleClass[1];return this.el.hasClass(e.cls)?0==e.enable?this.states[2]:(this.el.removeClass(e.cls),t&&this.el.addClass(t.cls),$(this).data("state",this.states[1]),e.action&&e.action(this.el),this.states[1]):t&&0==t.enable?this.states[2]:(t&&this.el.removeClass(t.cls),this.el.addClass(e.cls),$(this).data("state",this.states[0]),t.action&&t.action(this.el),this.states[0])}},Object.defineProperties(window.sinaCnHome,{toggleButton:{value:o}})}(window,document)}catch(e){console["error"in console?"error":"log"](e,"togglebutton.js")}var toggleButton=new sinaCnHome.toggleButton($(".subscript"),{beforetoggle:function(){var e=$.Deferred();if(checkLogin())e.resolve(!0);else{var t="function"==typeof WapLogin?new WapLogin:this;t.login(!1,function(t){e.resolve(!0)})}return e.promise()},toggle:function(e,t){var n=$.Deferred(),o=function(){n.resolve(!1)};return setTimeout(o,3e3),$.ajax({type:"GET",url:"http://k.sina.cn/aj/subscribe",data:{media_id:e.data("media_id"),type:"on"==t?2:1},dataType:"jsonp",jsonpCallback:"callback",timeout:300,success:function(e){n.resolve(!0)},error:function(e,t){n.resolve(!1)}}),n.promise()},toggleClass:[{cls:"order_on",enable:!0},{cls:"order_off",enable:!0}]}).init();